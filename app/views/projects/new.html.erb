<h2>Add A New Project</h2>

<%= form_for @project do |f| %>
  <p>
    <%= f.label "Name" %>
    <%= f.text_field :name %>
  </p>

  <p>
    <%= f.fields_for :items, @project.items do |items_builder| %>
      <%= find_material_name(items_builder) %>
      <%= items_builder.hidden_field :material_id %>
      : quantity:<%= items_builder.number_field :quantity, min: 0, placeholder: item_quantity(items_builder.object.id) %>
      <br></br>
    <% end %>

  </p>
  <%= f.fields_for :materials, @project.materials.build do |mat| %>
    New Material: <%= mat.text_field :name %>
    Quantity On Hand: <%= mat.number_field :quantity_on_hand, min: 0, placeholder: mat.object.quantity_on_hand%>
    <%= f.fields_for :items, @project.items.build do |items_builder| %>
    Quantity Needed: <%= items_builder.number_field :quantity %>
                     <%= items_builder.hidden_field :material_id, value: Material.all.last.id + 1 %>
    <% end %>
  <% end %><br></br>

  <%= f.hidden_field :house_id, :value => @project.house.id %>
  <%= f.submit %>
<% end %>
